<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> | Monetize Hub</title>
    <% if (metaDescription) { %>
      <meta name="description" content="<%= metaDescription %>" />
    <% } %>
    <% if (metaKeywords) { %>
      <meta name="keywords" content="<%= metaKeywords %>" />
    <% } %>
    <% if (canonicalUrl) { %>
      <link rel="canonical" href="<%= canonicalUrl %>" />
    <% } %>
    <% if (ogTitle) { %>
      <meta property="og:title" content="<%= ogTitle %>" />
    <% } %>
    <% if (ogDescription || metaDescription) { %>
      <meta property="og:description" content="<%= ogDescription || metaDescription %>" />
    <% } %>
    <% if (canonicalUrl) { %>
      <meta property="og:url" content="<%= canonicalUrl %>" />
    <% } %>
    <meta property="og:type" content="website" />
    <% if (structuredData) { %>
      <script type="application/ld+json">
        <%= structuredData %>
      </script>
    <% } %>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="header-top">
        <a class="brand" href="/">
          <img src="/logo.png" alt="Monetize Hub" class="brand-logo" />
          <div class="brand-text">
            <span class="brand-name">Monetize Hub</span>
            <span class="brand-tagline">Launch, host, and grow your webapps</span>
          </div>
        </a>
        <details class="nav-dropdown user-dropdown">
          <summary class="nav-link nav-dropdown-toggle">
            <% if (currentUser) { %>
              <span class="user-label"><%= currentUser.email %></span>
            <% } else { %>
              <span class="user-label">Account</span>
            <% } %>
            <span aria-hidden="true">▾</span>
          </summary>
          <div class="nav-dropdown-menu">
            <% if (currentUser) { %>
              <a href="/account" class="dropdown-link">Account Settings</a>
              <% if (currentUser.role === 'admin') { %>
                <a href="/admin" class="dropdown-link">Admin Dashboard</a>
              <% } %>
              <form action="/logout" method="POST" class="dropdown-form">
                <button type="submit">Logout</button>
              </form>
            <% } else { %>
              <a href="/login" class="dropdown-link">Login</a>
              <a href="/register" class="dropdown-link">Create Account</a>
            <% } %>
          </div>
        </details>
      </div>
      <nav class="main-nav">
        <a href="/" class="nav-link">Home</a>
        <a href="/about" class="nav-link">About</a>
        <details class="nav-dropdown">
          <summary class="nav-link nav-dropdown-toggle">Webapps <span aria-hidden="true">▾</span></summary>
          <div class="nav-dropdown-menu">
            <a href="/excel-to-json" class="dropdown-link">Excel → JSON</a>
            <a href="/json-combiner" class="dropdown-link">JSON Combiner</a>
            <a href="/csv-xml-converter" class="dropdown-link">CSV/XML Converter</a>
          </div>
        </details>
        <% if (currentUser) { %>
          <% if (currentUser.role === 'admin') { %>
            <a href="/admin" class="nav-link">Admin</a>
          <% } %>
          <a href="/account" class="nav-link">Account</a>
          <form action="/logout" method="POST" class="nav-link inline-form">
            <button type="submit">Logout</button>
          </form>
        <% } else { %>
          <a href="/login" class="nav-link">Login</a>
          <a href="/register" class="nav-link nav-link-primary">Create Account</a>
        <% } %>
      </nav>
    </header>

    <% if (flash) { %>
      <div class="flash flash-<%= flash.type %>"><%= flash.message %></div>
    <% } %>

    <main class="page-body">
